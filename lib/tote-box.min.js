!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash"),require("urijs")):"function"==typeof define&&define.amd?define(["lodash","urijs"],e):"object"==typeof exports?exports.ToteBox=e(require("lodash"),require("urijs")):t.ToteBox=e(t.Lodash,t.URI)}(window,function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.r(e);var r=n(0);function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=/\{([^}]+)\}/g;return o.test(t)&&Object(r.isPlainObject)(e)&&!Object(r.isEmpty)(e)?t.replace(o,function(t,o){var i=e[o];return Object(r.isUndefined)(i)?t:(n&&delete e[o],i)}):t}function i(){}var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function c(t){for(var e,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.id,c=void 0===i?"id":i,a=o.parentId,f=void 0===a?"parentId":a,s=o.rootParentId,l=void 0===s?0:s,d=o.children,v=void 0===d?"children":d,h=[],y={},p=[],b=0;b<t.length;b++)y[t[b][c]]=b,h.push(u({},t[b],(r=[],(n=v)in(e={})?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e)));for(var g=0;g<h.length;g++){var m=h[g];if(m[f]!==l){var j=y[m[f]];if("number"==typeof j)h[j].children.push(m)}else p.push(m)}return p}function a(){}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){if(null==t)return t+"";var e={};return"Number String Boolean Array Function Object Math Date RegExp Error".split(" ").forEach(function(t){e["[object "+t+"]"]=t.toLowerCase()}),e[Object.prototype.toString.call(t)]||(void 0===t?"undefined":f(t))}function d(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;var o=n.shift(),i=Object.keys(o),u=!0,c=!1,a=void 0;try{for(var f,v=i[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var h=f.value;"object"===l(o[h])||"array"===l(o[h])?(t[h]||Object.assign(t,s({},h,"object"===l(o[h])?{}:[])),d(t[h],o[h])):Object.assign(t,s({},h,o[h]))}}catch(t){c=!0,a=t}finally{try{!u&&v.return&&v.return()}finally{if(c)throw a}}return d.apply(void 0,[t].concat(n))}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"年 月 周 天 小时 分钟 秒".split(" "),n="year month week day hours minutes second".split(" "),r=[1,12,4,7,24,60,60],o={},i=[];return n.reduce(function(e,n,i){var u=void 0;return u=0===i?t/31536e6:(e-Math.floor(e))*r[i],o[n]=Math.floor(u),u},t),n.forEach(function(t,n){o[t]&&i.push(""+o[t]+e[n])}),i}function h(t,e,n){var r=e.onStart,o=e.onProgress,i=e.onEnd,u=void 0;return r.bind(n)(t),function e(){u=setTimeout(function(){if(!t)return i.bind(n)(t);o.bind(n)(--t),e()},1e3)}(),function(e){clearTimeout(u),e.bind(n)(t)}}var y={get:function(t){return JSON.parse(localStorage.getItem(t))},set:function(t,e){e="string"!=typeof e?JSON.stringify(e):e;try{localStorage.setItem(t,e)}catch(n){console.error("cache.set("+t+", "+e+") error: "+n.message+".")}},remove:function(t){localStorage.removeItem(t)},clear:function(){localStorage.clear()}},p={get:function(t,e){var n=y.get(t);return"object"!==l(n)||"undefined"===l(n[e])?null:n[e]},set:function(t,e,n){var o=y.get(t)||{},i=o[e];i&&l(i)===l(n)&&Object(r.isPlainObject)(n)?o[e]=Object.assign({},i,n):o[e]=n,y.set(t,o)},remove:function(t,e){var n=y.get(t);"object"===l(n)&&(delete n[e],y.set(t,n))},clear:function(t){"object"===l(y.get(t))&&y.set(t,null)}};function b(t){var e=void 0,n=void 0;void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange"),document.addEventListener(n,function(){"function"==typeof t&&t(!document[e])},!1)}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=/^([^?#]+)(\?[^#]+)?(#.+)?/;function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=/^([^=]+)(?:=(.*))?$/,n=j.exec(t)||[],r=m(n,3)[2];if(!r)return null;for(var o={},i=r.substring(1).split("&"),u=i.length,c=0;c<u;c++){var a=e.exec(i[c]);if(a){var f=m(a,3),s=f[1],l=f[2];s=decodeURIComponent(s),l=void 0!==l?decodeURIComponent(l):"",o[s]=/\d+/.test(l)?+l:l}}return o}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=O(t)||{},r=!0,o=!1,i=void 0;try{for(var u,c=Object.keys(e)[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var a=u.value;n[a]=e[a]}}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}var f=[],s=!0,l=!1,d=void 0;try{for(var v,h=Object.keys(n)[Symbol.iterator]();!(s=(v=h.next()).done);s=!0){var y=v.value;f.push(encodeURIComponent(y)+"="+encodeURIComponent(n[y]))}}catch(t){l=!0,d=t}finally{try{!s&&h.return&&h.return()}finally{if(l)throw d}}if(!f.length)return t;var p=j.exec(t),b=m(p,4),g=b[1],x=b[3],w=void 0===x?"":x;return g+"?"+f.join("&")+w}function w(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],o=e[1];if(r){if("object"===(void 0===r?"undefined":g(r))){var i=[window.location.href,r];r=i[0],o=i[1]}}else r=window.location.href;return o?x(r,o):O(r)}var S=n(1),k=n.n(S),I='请求接口"{url}"时出错，错误信息：{message}',P=function(t,e){return fetch(t,e).then(function(e){return e.json().then(function(t){return 0===t.status?t.data:Promise.reject(t)},function(e){throw new Error(o(I,{url:t,message:e.message}))})},function(e){throw new Error(o(I,{url:t,message:e.message}))})};"get post put patch delete".split(" ").forEach(function(t){P[t]=function(e,n,i){return e=o(e,n,!0),i=Object.assign({method:t.toUpperCase()},P.defaults,i),"get"===t||"delete"===t?Object(r.isPlainObject)(n)&&!Object(r.isEmpty)(n)&&(e=(e=new k.a(e)).query(n).href()):i=Object.assign(i,{body:Object(r.isPlainObject)(n)&&!Object(r.isEmpty)(n)?JSON.stringify(n):""}),function(t,e){var n=void 0;return e.timeout?(n=e.timeout,delete e.timeout,Promise.race([P(t,e),new Promise(function(e,r){setTimeout(function(){return r(new Error(o(I,{url:t,message:"请求超时"})))},n)})])):P(t,e)}(e,i)}}),P.defaults={};var E=P,T=function(){this.stack=[],this.activeIndex=0};T.prototype={constructor:T,getActive:function(){return this.stack[this.activeIndex]},getPrev:function(){return this.stack[this.activeIndex-1]},getNext:function(){return this.stack[this.activeIndex+1]},size:function(){return this.stack.length},add:function(t){return this.getNext()&&(this.stack=this.stack.slice(0,this.activeIndex+1)),this.stack.push(t),this.activeIndex=this.stack.length-1,this.stack.length},find:function(t){var e,n,r=this.stack.length;for(n=0;n<r;n++)if(t===this.stack[n]){e=n;break}return e},direct:function(t){var e=this.find(t),n=this.activeIndex;return void 0!==e&&(this.activeIndex=e),e<n?-1:e>n?1:this.add(t)}};var A=T;n.d(e,"parseTextPlaceholder",function(){return o}),n.d(e,"noop",function(){return i}),n.d(e,"arrayToTree",function(){return c}),n.d(e,"noop",function(){return a}),n.d(e,"type",function(){return l}),n.d(e,"deepAssign",function(){return d}),n.d(e,"timeParser",function(){return v}),n.d(e,"timer",function(){return h}),n.d(e,"cache",function(){return y}),n.d(e,"cacheTable",function(){return p}),n.d(e,"listenPageVisibility",function(){return b}),n.d(e,"getQuerys",function(){return O}),n.d(e,"addQuerys",function(){return x}),n.d(e,"querys",function(){return w}),n.d(e,"http",function(){return E}),n.d(e,"History",function(){return A})}])});