!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash"),require("urijs")):"function"==typeof define&&define.amd?define(["lodash","urijs"],e):"object"==typeof exports?exports.ToteBox=e(require("lodash"),require("urijs")):t.ToteBox=e(t.Lodash,t.URI)}(window,function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.r(e);var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){if(null==t)return t+"";var e={};return"Number String Boolean Array Function Object Math Date RegExp Error".split(" ").forEach(function(t){e["[object "+t+"]"]=t.toLowerCase()}),e[Object.prototype.toString.call(t)]||(void 0===t?"undefined":r(t))}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;var u=n.shift(),s=Object.keys(u),a=!0,f=!1,l=void 0;try{for(var d,h=s[Symbol.iterator]();!(a=(d=h.next()).done);a=!0){var p=d.value;"object"===o(u[p])||"array"===o(u[p])?(t[p]||Object.assign(t,i({},p,"object"===o(u[p])?{}:[])),c(t[p],u[p])):Object.assign(t,i({},p,u[p]))}}catch(t){f=!0,l=t}finally{try{!a&&h.return&&h.return()}finally{if(f)throw l}}return c.apply(void 0,[t].concat(n))}var u=n(0);function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=/\{([^}]+)\}/g;return r.test(t)&&Object(u.isPlainObject)(e)&&!Object(u.isEmpty)(e)?t.replace(r,function(t,r){var i=e[r];return Object(u.isUndefined)(i)?t:(n&&delete e[r],i)}):t}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"年 月 周 天 小时 分钟 秒".split(" "),n="year month week day hours minutes second".split(" "),r=[1,12,4,7,24,60,60],i={},o=[];return n.reduce(function(e,n,o){var c=void 0;return c=0===o?t/31536e6:(e-Math.floor(e))*r[o],i[n]=Math.floor(c),c},t),n.forEach(function(t,n){i[t]&&o.push(""+i[t]+e[n])}),o}var f={get:function(t){return JSON.parse(localStorage.getItem(t))},set:function(t,e){e="string"!=typeof e?JSON.stringify(e):e;try{localStorage.setItem(t,e)}catch(t){}},remove:function(t){localStorage.removeItem(t)},clear:function(){localStorage.clear()}},l={get:function(t,e){var n=f.get(t);return"object"!==o(n)||"undefined"===o(n[e])?null:n[e]},set:function(t,e,n){var r=f.get(t)||{},i=r[e];i&&o(i)===o(n)&&Object(u.isPlainObject)(n)?r[e]=Object.assign({},i,n):r[e]=n,f.set(t,r)},remove:function(t,e){var n=f.get(t);"object"===o(n)&&(delete n[e],f.set(t,n))},clear:function(t){"object"===o(f.get(t))&&f.set(t,null)}};function d(t){var e=void 0,n=void 0;void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange"),document.addEventListener(n,function(){"function"==typeof t&&t(!document[e])},!1)}var h=n(1),p=n.n(h),b='请求接口"{url}"时出错，错误信息：{message}',v=function(t,e){return fetch(t,e).then(function(e){return e.json().then(function(e){return 0===e.status?e.data:Promise.reject({message:s(b,{url:t,message:e.message}),status:e.status,data:e.data})},function(e){throw new Error(s(b,{url:t,message:e.message}))})},function(e){throw new Error(s(b,{url:t,message:e.message}))})};"get post put patch delete".split(" ").forEach(function(t){v[t]=function(e,n,r){return e=s(e,n,!0),r=Object.assign({method:t.toUpperCase()},v.defaults,r),"get"===t||"delete"===t?Object(u.isPlainObject)(n)&&!Object(u.isEmpty)(n)&&(e=(e=new p.a(e)).query(n).href()):r=Object.assign(r,{body:Object(u.isPlainObject)(n)&&!Object(u.isEmpty)(n)?JSON.stringify(n):""}),function(t,e){var n=void 0;return e.timeout?(n=e.timeout,delete e.timeout,Promise.race([v(t,e),new Promise(function(e,r){setTimeout(function(){return r(new Error(s(b,{url:t,message:"请求超时"})))},n)})])):v(t,e)}(e,r)}}),v.defaults={};var g=v,y=function(){this.stack=[],this.activeIndex=0};y.prototype={constructor:y,getActive:function(){return this.stack[this.activeIndex]},getPrev:function(){return this.stack[this.activeIndex-1]},getNext:function(){return this.stack[this.activeIndex+1]},size:function(){return this.stack.length},add:function(t){return this.getNext()&&(this.stack=this.stack.slice(0,this.activeIndex+1)),this.stack.push(t),this.activeIndex=this.stack.length-1,this.stack.length},find:function(t){var e,n,r=this.stack.length;for(n=0;n<r;n++)if(t===this.stack[n]){e=n;break}return e},direct:function(t){var e=this.find(t),n=this.activeIndex;return void 0!==e&&(this.activeIndex=e),e<n?-1:e>n?1:this.add(t)}};var m=y;n.d(e,"type",function(){return o}),n.d(e,"deepAssign",function(){return c}),n.d(e,"parseTextPlaceholder",function(){return s}),n.d(e,"timeParser",function(){return a}),n.d(e,"cache",function(){return f}),n.d(e,"cacheTable",function(){return l}),n.d(e,"listenPageVisibility",function(){return d}),n.d(e,"http",function(){return g}),n.d(e,"History",function(){return m})}])});