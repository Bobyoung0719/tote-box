!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash"),require("urijs")):"function"==typeof define&&define.amd?define(["lodash","urijs"],e):"object"==typeof exports?exports.ToteBox=e(require("lodash"),require("urijs")):t.ToteBox=e(t.Lodash,t.URI)}(window,function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.r(e);var r=n(0);function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=/\{([^}]+)\}/g;return o.test(t)&&Object(r.isPlainObject)(e)&&!Object(r.isEmpty)(e)?t.replace(o,function(t,o){var i=e[o];return Object(r.isUndefined)(i)?t:(n&&delete e[o],i)}):t}function i(){}var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function u(t){for(var e,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.id,u=void 0===i?"id":i,a=o.parentId,s=void 0===a?"parentId":a,f=o.rootParentId,d=void 0===f?0:f,l=o.children,h=void 0===l?"children":l,v=[],p={},y=[],m=0;m<t.length;m++)p[t[m][u]]=m,v.push(c({},t[m],(r=[],(n=h)in(e={})?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e)));for(var b=0;b<v.length;b++){var g=v[b];if(g[s]!==d){var j=p[g[s]];if("number"==typeof j)v[j].children.push(g)}else y.push(g)}return y}function a(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,o=t.concat();!function t(){setTimeout(function(){e.call(n,o.shift()),o.length&&t()},r)}()}function s(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.runDuration,c=void 0===i?25:i,u=o.chunkDuration,a=void 0===u?50:u,s=t.concat();!function t(){setTimeout(function(){var o=Date.now();do{e.call(n,s.shift())}while(s.length&&Date.now()-o<a);s.length?t():r()},c)}()}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){if(null==t)return t+"";var e={};return"Number String Boolean Array Function Object Math Date RegExp Error".split(" ").forEach(function(t){e["[object "+t+"]"]=t.toLowerCase()}),e[Object.prototype.toString.call(t)]||(void 0===t?"undefined":f(t))}function h(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;var o=n.shift(),i=Object.keys(o),c=!0,u=!1,a=void 0;try{for(var s,f=i[Symbol.iterator]();!(c=(s=f.next()).done);c=!0){var v=s.value;"object"===l(o[v])||"array"===l(o[v])?(t[v]||Object.assign(t,d({},v,"object"===l(o[v])?{}:[])),h(t[v],o[v])):Object.assign(t,d({},v,o[v]))}}catch(t){u=!0,a=t}finally{try{!c&&f.return&&f.return()}finally{if(u)throw a}}return h.apply(void 0,[t].concat(n))}function v(t,e){var n=e-t+1;return Math.floor(Math.random()*n+t)}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"年 月 周 天 小时 分钟 秒".split(" "),n="year month week day hours minutes second".split(" "),r=[1,12,4,7,24,60,60],o={},i=[];return n.reduce(function(e,n,i){var c=void 0;return c=0===i?t/31536e6:(e-Math.floor(e))*r[i],o[n]=Math.floor(c),c},t),n.forEach(function(t,n){o[t]&&i.push(""+o[t]+e[n])}),i}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.onStart,r=void 0===n?m:n,o=e.onProgress,i=void 0===o?m:o,c=e.onEnd,u=void 0===c?m:c,a=arguments[2],s=void 0;return r.bind(a)(t),function e(){s=setTimeout(function(){if(!t)return u.bind(a)(t);i.bind(a)(--t),e()},1e3)}(),function(e){clearTimeout(s),e.bind(a)(t)}}function m(){}var b={get:function(t){return JSON.parse(localStorage.getItem(t))},set:function(t,e){e="string"!=typeof e?JSON.stringify(e):e;try{localStorage.setItem(t,e)}catch(n){console.error("cache.set("+t+", "+e+") error: "+n.message+".")}},remove:function(t){localStorage.removeItem(t)},clear:function(){localStorage.clear()}},g={get:function(t,e){var n=b.get(t);return"object"!==l(n)||"undefined"===l(n[e])?null:n[e]},set:function(t,e,n){var o=b.get(t)||{},i=o[e];i&&l(i)===l(n)&&Object(r.isPlainObject)(n)?o[e]=Object.assign({},i,n):o[e]=n,b.set(t,o)},remove:function(t,e){var n=b.get(t);"object"===l(n)&&(delete n[e],b.set(t,n))},clear:function(t){"object"===l(b.get(t))&&b.set(t,null)}},j={get:function(t){var e="(?:;\\s)?"+encodeURIComponent(t)+"=([^;]*);?";return new RegExp(e).test(document.cookie)?decodeURIComponent(RegExp.$1):null},set:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.expires,o=n.path,i=n.domain,c=n.secure,u=encodeURIComponent(t)+"="+encodeURIComponent(e);r instanceof Date&&(u+="; expires="+r.toGMTString()),o&&(u+="; path="+o),i&&(u+="; domain="+i),c&&(u+="; secure"),document.cookie=u},remove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.path,r=e.domain,o=e.secure,i={expires:new Date(0),path:n,domain:r,secure:o};this.set(t,"",i)}};function x(t){var e=void 0,n=void 0;void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange"),document.addEventListener(n,function(){"function"==typeof t&&t(!document[e])},!1)}function O(t,e,n,r){var o=void 0;"js"===t?(o=document.createElement("script")).type="text/javascript":"css"===t&&((o=document.createElement("link")).rel="stylesheet",o.type="text/css"),n&&(o.readyState?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(o.onreadystatechange=null,n.bind(r)())}:o.onload=function(){n.bind(r)()}),o["js"===t?"src":"href"]=e,document.getElementsByTagName("head")[0].appendChild(o)}var w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var c,u=t[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=/^([^?#]+)(\?[^#]+)?(#.+)?/;function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=/^([^=]+)(?:=(.*))?$/,n=k.exec(t)||[],r=S(n,3)[2];if(!r)return null;for(var o={},i=r.substring(1).split("&"),c=i.length,u=0;u<c;u++){var a=e.exec(i[u]);if(a){var s=S(a,3),f=s[1],d=s[2];f=decodeURIComponent(f),d=void 0!==d?decodeURIComponent(d):"",o[f]=/\d+/.test(d)?+d:d}}return o}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=I(t)||{},r=!0,o=!1,i=void 0;try{for(var c,u=Object.keys(e)[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var a=c.value;n[a]=e[a]}}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}var s=[],f=!0,d=!1,l=void 0;try{for(var h,v=Object.keys(n)[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var p=h.value;s.push(encodeURIComponent(p)+"="+encodeURIComponent(n[p]))}}catch(t){d=!0,l=t}finally{try{!f&&v.return&&v.return()}finally{if(d)throw l}}if(!s.length)return t;var y=k.exec(t),m=S(y,4),b=m[1],g=m[3],j=void 0===g?"":g;return b+"?"+s.join("&")+j}function P(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],o=e[1];if(r){if("object"===(void 0===r?"undefined":w(r))){var i=[window.location.href,r];r=i[0],o=i[1]}}else r=window.location.href;return o?E(r,o):I(r)}var T=n(1),R=n.n(T),C='请求接口"{url}"时出错，错误信息：{message}',U=function(t,e){return fetch(t,e).then(function(e){return e.json().then(function(t){return 0===t.status?t.data:Promise.reject(t)},function(e){throw new Error(o(C,{url:t,message:e.message}))})},function(e){throw new Error(o(C,{url:t,message:e.message}))})};"get post put patch delete".split(" ").forEach(function(t){U[t]=function(e,n,i){return e=o(e,n,!0),i=Object.assign({method:t.toUpperCase()},U.defaults,i),"get"===t||"delete"===t?Object(r.isPlainObject)(n)&&!Object(r.isEmpty)(n)&&(e=(e=new R.a(e)).query(n).href()):i=Object.assign(i,{body:Object(r.isPlainObject)(n)&&!Object(r.isEmpty)(n)?JSON.stringify(n):""}),function(t,e){var n=void 0;return e.timeout?(n=e.timeout,delete e.timeout,Promise.race([U(t,e),new Promise(function(e,r){setTimeout(function(){return r(new Error(o(C,{url:t,message:"请求超时"})))},n)})])):U(t,e)}(e,i)}}),U.defaults={};var M=U,A=function(){this.stack=[],this.activeIndex=0};A.prototype={constructor:A,getActive:function(){return this.stack[this.activeIndex]},getPrev:function(){return this.stack[this.activeIndex-1]},getNext:function(){return this.stack[this.activeIndex+1]},size:function(){return this.stack.length},add:function(t){return this.getNext()&&(this.stack=this.stack.slice(0,this.activeIndex+1)),this.stack.push(t),this.activeIndex=this.stack.length-1,this.stack.length},find:function(t){var e,n,r=this.stack.length;for(n=0;n<r;n++)if(t===this.stack[n]){e=n;break}return e},direct:function(t){var e=this.find(t),n=this.activeIndex;return void 0!==e&&(this.activeIndex=e),e<n?-1:e>n?1:this.add(t)}};var D=A;n.d(e,"parseTextPlaceholder",function(){return o}),n.d(e,"noop",function(){return i}),n.d(e,"arrayToTree",function(){return u}),n.d(e,"chunk",function(){return a}),n.d(e,"batch",function(){return s}),n.d(e,"type",function(){return l}),n.d(e,"deepAssign",function(){return h}),n.d(e,"random",function(){return v}),n.d(e,"timeParser",function(){return p}),n.d(e,"timer",function(){return y}),n.d(e,"noop",function(){return m}),n.d(e,"cache",function(){return b}),n.d(e,"cacheTable",function(){return g}),n.d(e,"cookie",function(){return j}),n.d(e,"listenPageVisibility",function(){return x}),n.d(e,"loadFile",function(){return O}),n.d(e,"getQuerys",function(){return I}),n.d(e,"addQuerys",function(){return E}),n.d(e,"querys",function(){return P}),n.d(e,"http",function(){return M}),n.d(e,"History",function(){return D})}])});